<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cadastro Olimpico</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9f9f9;
    margin: 0; padding: 20px;
    color: #333;
  }
  .container {
    max-width: 620px;
    margin: auto;
    background: white;
    padding: 20px 25px 30px 25px;
    border-radius: 8px;
    box-shadow: 0 3px 12px rgba(0,0,0,0.12);
  }
  .top-link {
    font-size: 0.95rem;
    text-align: left;
    padding-left: 5px;
    margin-bottom: 15px;
  }
  .top-link a {
    background-color: #cce4f7;
    color: #1a458a;
    padding: 8px 14px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    cursor: pointer;
    display: inline-block;
    box-shadow: 0 2px 5px rgba(26, 69, 138, 0.3);
    transition: background-color 0.3s ease;
  }
  .top-link a:hover {
    background-color: #a9d0f5;
  }
  h1 {
    text-align: center;
    color: #2a4d69;
    margin-bottom: 25px;
  }
  .tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 25px;
  }
  .tab-btn {
    cursor: pointer;
    padding: 10px 26px;
    font-weight: 700;
    color: #2a4d69;
    background: #e2eaf3;
    border: none;
    border-radius: 8px 8px 0 0;
    margin: 0 8px;
    transition: background 0.3s ease, color 0.3s ease;
  }
  .tab-btn.active {
    background: #2a4d69;
    color: white;
  }
  .form-container {
    border-top: 2px solid #2a4d69;
    padding-top: 15px;
  }
  .form-content {
    display: none;
  }
  .form-content.active {
    display: block;
  }
  label {
    font-weight: 600;
    margin-top: 18px;
    display: block;
    color: #444;
  }
  input[type="text"], input[type="email"], input[type="password"], select {
    width: 100%;
    padding: 8px 12px;
    margin-top: 6px;
    border: 1.5px solid #ccc;
    border-radius: 5px;
    font-size: 1rem;
    box-sizing: border-box;
  }
  input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus, select:focus {
    border-color: #2a4d69;
    outline: none;
  }
  input[type="radio"] {
    margin-right: 7px;
    cursor: pointer;
  }
  .inline-group {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 7px;
  }
  .inline-group label {
    font-weight: 500;
    margin-top: 0;
    cursor: pointer;
  }
  .error-message {
    color: #d93025;
    font-size: 0.85rem;
    margin-top: 3px;
    display: none;
  }
  input.error, select.error {
    border-color: #d93025;
  }
  input[type="submit"] {
    background-color: #2a4d69;
    color: white;
    border: none;
    margin-top: 15px;
    padding: 14px 0;
    font-size: 1.15rem;
    border-radius: 6px;
    cursor: pointer;
    width: 100%;
    font-weight: 700;
    transition: background-color 0.3s ease;
  }
  input[type="submit"]:hover {
    background-color: #22435a;
  }
  /* Botão Adicionar professor minimalista */
  .add-prof-btn {
    width: 32px;
    height: 32px;
    font-weight: 700;
    font-size: 20px;
    margin-left: 5px;
    border-radius: 6px;
    border:none;
    background-color: #2a4d69;
    color: white;
    cursor: pointer;
    vertical-align: middle;
    transition: background-color 0.3s ease;
  }
  .add-prof-btn:hover {
    background-color: #22435a;
  }
  #listaProfessoresSelecionados {
    list-style: none;
    padding-left: 15px;
    max-height: 120px;
    overflow-y: auto;
    margin-top: 6px;
    border-left: 2px solid #2a4d69;
    color: #555;
    font-size: 0.9rem;
  }
  #listaProfessoresSelecionados li {
    margin-bottom: 4px;
    padding-left: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 3px;
    background: #eff6ff;
  }
  #listaProfessoresSelecionados li button {
    background: transparent;
    border: none;
    color: #c93025;
    font-weight: 700;
    cursor: pointer;
    font-size: 14px;
  }
  /* Estilo das sugestões aniversário */
  #autocompleteList {
    border: 1px solid #ccc;
    border-top: none;
    max-height: 130px;
    overflow-y: auto;
    position: absolute;
    background: white;
    width: 100%;
    z-index: 1000;
  }
  #autocompleteList div {
    padding: 8px 12px;
    cursor: pointer;
    border-top: 1px solid #ccc;
  }
  #autocompleteList div:hover {
    background-color: #e0e7ff;
  }
  .relative-container {
    position: relative;
    width: 100%;
  }
</style>
</head>
<body>
<div class="container">

  <div class="top-link">
    <a href="../login/login.html">&larr; Voltar para login</a>
  </div>

  <h1>Cadastre-se</h1>

  <div class="tabs">
    <button id="btnAluno" class="tab-btn active" type="button">Aluno</button>
    <button id="btnProfessor" class="tab-btn" type="button">Professor</button>
  </div>

  <div class="form-container">
    <div id="formAluno" class="form-content active">
      <form id="dadosFormAluno" novalidate>

        <label for="nome_completo_aluno">Nome completo:</label>
        <input type="text" id="nome_completo_aluno" name="nome_completo" required />
        <div class="error-message" id="error-nome_completo_aluno">Por favor, preencha o nome completo.</div>

        <label for="inputProfessor">Professores cadastrados:</label>
        <div class="relative-container">
          <input type="text" id="inputProfessor" placeholder="Digite para buscar..." autocomplete="off" style="width: calc(100% - 38px); padding-right: 38px;"/>
          <button type="button" class="add-prof-btn" id="btnAddProfessor" title="Adicionar professor">+</button>
          <div id="autocompleteList" style="display:none;"></div>
        </div>
        <ul id="listaProfessoresSelecionados"></ul>

        <label for="data_nascimento">Data de Nascimento (dd/mm/aaaa):</label>
        <input type="text" id="data_nascimento" name="data_nascimento" placeholder="dd/mm/aaaa" maxlength="10" required />
        <div class="error-message" id="error-data_nascimento">Data de nascimento inválida ou faltando.</div>

        <label>Gênero:</label>
        <div class="inline-group" id="generoGroupAlu">
          <label><input type="radio" name="genero" value="Masculino" required />Masculino</label>
          <label><input type="radio" name="genero" value="Feminino" />Feminino</label>
          <label><input type="radio" name="genero" value="Prefiro não dizer" />Prefiro não dizer</label>
        </div>
        <div class="error-message" id="error-genero">Por favor, selecione um gênero.</div>

        <label for="cpf_aluno">CPF:</label>
        <input type="text" id="cpf_aluno" name="cpf" required />
        <div class="error-message" id="error-cpf_aluno">Por favor, preencha o CPF.</div>

        <label for="matricula_aluno">Matrícula:</label>
        <input type="text" id="matricula_aluno" name="matricula" required />
        <div class="error-message" id="error-matricula_aluno">Por favor, preencha a matrícula.</div>

        <label>Campus:</label>
        <div class="inline-group" id="campusGroupAlu">
          <label><input type="radio" name="campus" value="SGA" required />SGA</label>
          <label><input type="radio" name="campus" value="Outro" />Outro:</label>
          <input type="text" id="campus_outro_text_aluno" name="campus_outro_text" placeholder="Especifique" style="display:none; width:auto; flex-grow:1;" />
        </div>
        <div class="error-message" id="error-campus">Por favor, selecione um campus.</div>
        <div class="error-message" id="error-campus_outro">Por favor, especifique o campus.</div>

        <label for="curso">Curso:</label>
        <select id="curso" name="curso" required>
          <option value="">Selecione</option>
          <option value="Logística">Logística</option>
          <option value="Edificações">Edificações</option>
          <option value="Informática">Informática</option>
          <option value="Outro">Outro</option>
        </select>
        <input type="text" id="curso_outro" name="curso_outro" placeholder="Se outro, especifique" style="display:none; margin-top:5px;" />
        <div class="error-message" id="error-curso">Por favor, selecione o curso.</div>
        <div class="error-message" id="error-curso_outro">Por favor, especifique o curso.</div>

        <label for="turno">Turno:</label>
        <select id="turno" name="turno" required>
          <option value="">Selecione</option>
          <option value="Matutino">Matutino</option>
          <option value="Vespertino">Vespertino</option>
          <option value="Noturno">Noturno</option>
        </select>
        <div class="error-message" id="error-turno">Por favor, selecione o turno.</div>

        <label for="ano_escolar">Ano escolar:</label>
        <select id="ano_escolar" name="ano_escolar" required>
          <option value="">Selecione</option>
          <option value="6º ano">6º ano</option>
          <option value="7º ano">7º ano</option>
          <option value="8º ano">8º ano</option>
          <option value="9º ano">9º ano</option>
          <option value="1º do EM">1º do EM</option>
          <option value="2º do EM">2º do EM</option>
          <option value="3º do EM">3º do EM</option>
          <option value="4º do EM">4º do EM</option>
          <option value="Outro">Outro</option>
        </select>
        <input type="text" id="ano_escolar_outro" name="ano_escolar_outro" placeholder="Se outro, especifique" style="display:none; margin-top:5px;" />
        <div class="error-message" id="error-ano_escolar">Por favor, selecione o ano escolar.</div>
        <div class="error-message" id="error-ano_escolar_outro">Por favor, especifique o ano escolar.</div>

        <label for="tipo_escola">Tipo de escola:</label>
        <select id="tipo_escola" name="tipo_escola" required>
          <option value="">Selecione</option>
          <option value="Pública">Pública</option>
          <option value="Privada sem bolsa">Privada sem bolsa</option>
          <option value="Privada com bolsa parcial">Privada com bolsa parcial</option>
          <option value="Privada com bolsa integral">Privada com bolsa integral</option>
          <option value="Outro">Outro</option>
        </select>
        <input type="text" id="tipo_escola_outro" name="tipo_escola_outro" placeholder="Se outro, especifique" style="display:none; margin-top:5px;" />
        <div class="error-message" id="error-tipo_escola">Por favor, selecione o tipo de escola.</div>
        <div class="error-message" id="error-tipo_escola_outro">Por favor, especifique o tipo de escola.</div>

        <label for="email_aluno">E-mail:</label>
        <input type="email" id="email_aluno" name="email" required />
        <div class="note">Escreva corretamente o e-mail que você mais utiliza. Escreva com atenção!</div>
        <div class="error-message" id="error-email">Por favor, preencha um e-mail válido.</div>

        <label for="whatsapp">Número de Whatsapp (para facilitar comunicação):</label>
        <input type="text" id="whatsapp" name="whatsapp" required />
        <div class="error-message" id="error-whatsapp">Por favor, informe seu número de Whatsapp.</div>

        <label for="senha_aluno">Crie uma senha para fazer login:</label>
        <input type="password" id="senha_aluno" name="senha" minlength="6" required />
        <div class="error-message" id="error-senha">A senha deve ter pelo menos 6 caracteres.</div>

        <label for="confirmar_senha_aluno">Confirme a senha:</label>
        <input type="password" id="confirmar_senha_aluno" name="confirmar_senha" minlength="6" required />
        <div class="error-message" id="error-confirmar_senha">As senhas não coincidem.</div>

        <input type="submit" value="Cadastrar" />
      </form>
    </div>

    <div id="formProfessor" class="form-content">
      <form id="dadosFormProfessor" novalidate>
        <label for="nome_completo_prof">Nome completo:</label>
        <input type="text" id="nome_completo_prof" name="nome_completo" required />
        <div class="error-message" id="error-nome_completo_prof">Por favor, preencha o nome completo.</div>
        <label>Gênero:</label>
        <div class="inline-group" id="generoGroupProf">
          <label><input type="radio" name="genero_prof" value="Masculino" required />Masculino</label>
          <label><input type="radio" name="genero_prof" value="Feminino" />Feminino</label>
          <label><input type="radio" name="genero_prof" value="Prefiro não dizer" />Prefiro não dizer</label>
        </div>
        <div class="error-message" id="error-genero_prof">Por favor, selecione um gênero.</div>
        <label for="cpf_prof">CPF:</label>
        <input type="text" id="cpf_prof" name="cpf" required />
        <div class="error-message" id="error-cpf_prof">Por favor, preencha o CPF.</div>
        <label for="matricula_prof">Matrícula:</label>
        <input type="text" id="matricula_prof" name="matricula" required />
        <div class="error-message" id="error-matricula_prof">Por favor, preencha a matrícula.</div>
        <label>Campus:</label>
        <div class="inline-group" id="campusGroupProf">
          <label><input type="radio" name="campus_prof" value="SGA" required />SGA</label>
          <label><input type="radio" name="campus_prof" value="Outro" />Outro:</label>
          <input type="text" id="campus_outro_text_prof" name="campus_outro_text" placeholder="Especifique" style="display:none; width:auto; flex-grow:1;" />
        </div>
        <div class="error-message" id="error-campus_prof">Por favor, selecione um campus.</div>
        <div class="error-message" id="error-campus_outro_prof">Por favor, especifique o campus.</div>
        <label for="materia_prof">Matéria que dar aula:</label>
        <select id="materia_prof" name="materia" required>
          <option value="">Selecione</option>
          <option value="Matemática">Matemática</option>
          <option value="Física">Física</option>
          <option value="Geografia">Geografia</option>
          <option value="História">História</option>
          <option value="Outro">Outro</option>
        </select>
        <input type="text" id="materia_outro_prof" name="materia_outro" placeholder="Se outro, especifique" style="display:none; margin-top:5px;" />
        <div class="error-message" id="error-materia_prof">Por favor, selecione a matéria.</div>
        <div class="error-message" id="error-materia_outro_prof">Por favor, especifique a matéria.</div>
        <label for="email_prof">E-mail:</label>
        <input type="email" id="email_prof" name="email" required />
        <div class="note">Escreva corretamente o e-mail que você mais utiliza. Escreva com atenção!</div>
        <div class="error-message" id="error-email_prof">Por favor, preencha um e-mail válido.</div>
        <label for="senha_prof">Crie uma senha para fazer login:</label>
        <input type="password" id="senha_prof" name="senha" minlength="6" required />
        <div class="error-message" id="error-senha_prof">A senha deve ter pelo menos 6 caracteres.</div>
        <label for="confirmar_senha_prof">Confirme a senha:</label>
        <input type="password" id="confirmar_senha_prof" name="confirmar_senha" minlength="6" required />
        <div class="error-message" id="error-confirmar_senha_prof">As senhas não coincidem.</div>
        <input type="submit" value="Cadastrar" />
      </form>
    </div>
  </div>
</div>

<script>
  // Controle abas
  const btnAluno = document.getElementById('btnAluno');
  const btnProfessor = document.getElementById('btnProfessor');
  const formAluno = document.getElementById('formAluno');
  const formProfessor = document.getElementById('formProfessor');

  btnAluno.addEventListener('click', () => {
    btnAluno.classList.add('active');
    btnProfessor.classList.remove('active');
    formAluno.classList.add('active');
    formProfessor.classList.remove('active');
  });

  btnProfessor.addEventListener('click', () => {
    btnProfessor.classList.add('active');
    btnAluno.classList.remove('active');
    formProfessor.classList.add('active');
    formAluno.classList.remove('active');
  });

  // Toggle "Outro"
  function toggleOutro(selectElem, inputId) {
    const input = document.getElementById(inputId);
    if (selectElem.value === 'Outro') {
      input.style.display = 'block';
      input.required = true;
    } else {
      input.style.display = 'none';
      input.required = false;
      input.value = '';
    }
  }

  // Setup eventos "Outro"
  document.getElementById('curso').addEventListener('change', function() {
    toggleOutro(this, 'curso_outro');
    hideError('error-curso');
    hideError('error-curso_outro');
  });
  document.getElementById('ano_escolar').addEventListener('change', function() {
    toggleOutro(this, 'ano_escolar_outro');
    hideError('error-ano_escolar');
    hideError('error-ano_escolar_outro');
  });
  document.getElementById('tipo_escola').addEventListener('change', function() {
    toggleOutro(this, 'tipo_escola_outro');
    hideError('error-tipo_escola');
    hideError('error-tipo_escola_outro');
  });
  document.getElementById('materia_prof').addEventListener('change', function() {
    toggleOutro(this, 'materia_outro_prof');
    hideError('error-materia_prof');
    hideError('error-materia_outro_prof');
  });

  // Campus radios cliente e professor
  function setupCampusRadios(postfix) {
    const radios = document.querySelectorAll(`input[name='campus${postfix}']`);
    const outroInput = document.getElementById(`campus_outro_text${postfix}`);
    radios.forEach(radio => {
      radio.addEventListener('change', () => {
        if (radio.value === "Outro" && radio.checked) {
          outroInput.style.display = 'inline-block';
          outroInput.required = true;
        } else if (radio.checked) {
          outroInput.style.display = 'none';
          outroInput.required = false;
          outroInput.value = '';
          hideError(`error-campus_outro${postfix}`)
        }
        hideError(`error-campus${postfix}`);
      });
    });
  }
  setupCampusRadios('');
  setupCampusRadios('_prof');

  // Funções para mostrar e esconder erros
  function showError(id) {
    const elem = document.getElementById(id);
    if (elem) elem.style.display = 'block';
  }
  function hideError(id) {
    const elem = document.getElementById(id);
    if (elem) elem.style.display = 'none';
  }

  // Limpar erros ao digitar / mudar radios
  function setupInputListeners(formId, fields, radiosName) {
    const form = document.getElementById(formId);
    fields.forEach(id => {
      const elem = document.getElementById(id);
      if (elem) elem.addEventListener('input', () => hideError(`error-${id}`));
    });
    const radios = form.querySelectorAll(`input[name="${radiosName}"]`);
    radios.forEach(e => e.addEventListener('change', () => hideError(`error-${radiosName}`)));
  }
  setupInputListeners('dadosFormAluno', ['nome_completo_aluno', 'cpf_aluno', 'matricula_aluno', 'email_aluno', 'senha_aluno', 'confirmar_senha_aluno'], 'genero');
  setupInputListeners('dadosFormProfessor', ['nome_completo_prof', 'cpf_prof', 'matricula_prof', 'email_prof', 'senha_prof', 'confirmar_senha_prof'], 'genero_prof');

  // Validação formulário aluno
  function validateFormAluno(event) {
    let valid = true;
    function fail(id, elem=null) {
      showError(id);
      if (elem) elem.classList.add('error');
      valid = false;
    }
    const nome = document.getElementById('nome_completo_aluno');
    if (!nome.value.trim()) fail('error-nome_completo_aluno', nome);
    const dataNasc = document.getElementById('data_nascimento');
    const dataVal = dataNasc.value.trim();
    const dataRegex = /^(0[1-9]|[12]\d|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/;
    if (!dataVal || !dataRegex.test(dataVal)) fail('error-data_nascimento', dataNasc);
    const genero = [...document.querySelectorAll('input[name="genero"]:checked')];
    if (genero.length === 0) fail('error-genero');
    const cpf = document.getElementById('cpf_aluno');
    if (!cpf.value.trim()) fail('error-cpf_aluno', cpf);
    const matricula = document.getElementById('matricula_aluno');
    if (!matricula.value.trim()) fail('error-matricula_aluno', matricula);
    const campusChecked = [...document.querySelectorAll('input[name="campus"]:checked')];
    if (campusChecked.length === 0) fail('error-campus');
    else if (campusChecked[0].value === 'Outro') {
      const campusOutro = document.getElementById('campus_outro_text_aluno');
      if (!campusOutro.value.trim()) fail('error-campus_outro', campusOutro);
    }
    const curso = document.getElementById('curso');
    if (!curso.value) fail('error-curso', curso);
    else if (curso.value === 'Outro') {
      const cursoOutro = document.getElementById('curso_outro');
      if (!cursoOutro.value.trim()) fail('error-curso_outro', cursoOutro);
    }
    const turno = document.getElementById('turno');
    if (!turno.value) fail('error-turno', turno);
    const anoEscolar = document.getElementById('ano_escolar');
    if (!anoEscolar.value) fail('error-ano_escolar', anoEscolar);
    else if (anoEscolar.value === 'Outro') {
      const anoOutro = document.getElementById('ano_escolar_outro');
      if (!anoOutro.value.trim()) fail('error-ano_escolar_outro', anoOutro);
    }
    const tipoEscola = document.getElementById('tipo_escola');
    if (!tipoEscola.value) fail('error-tipo_escola', tipoEscola);
    else if (tipoEscola.value === 'Outro') {
      const tipoOutro = document.getElementById('tipo_escola_outro');
      if (!tipoOutro.value.trim()) fail('error-tipo_escola_outro', tipoOutro);
    }
    const email = document.getElementById('email_aluno');
    if (!email.value.trim() || !email.checkValidity()) fail('error-email', email);
    const whatsapp = document.getElementById('whatsapp');
    if (!whatsapp.value.trim()) fail('error-whatsapp', whatsapp);
    const senha = document.getElementById('senha_aluno');
    if (!senha.value || senha.value.length < 6) fail('error-senha', senha);
    const confirmarSenha = document.getElementById('confirmar_senha_aluno');
    if (senha.value !== confirmarSenha.value) fail('error-confirmar_senha', confirmarSenha);
    if (!valid) {
      event.preventDefault();
      const firstError = document.querySelector('.error-message[style*="block"]');
      if (firstError) {
        const offset = firstError.getBoundingClientRect().top + window.pageYOffset - 20;
        window.scrollTo({top: offset, behavior: 'smooth'});
      }
    }
  }
  // Validação formulário professor
  function validateFormProfessor(event) {
    let valid = true;
    function fail(id, elem = null) {
      showError(id);
      if (elem) elem.classList.add('error');
      valid = false;
    }
    const nome = document.getElementById('nome_completo_prof');
    if (!nome.value.trim()) fail('error-nome_completo_prof', nome);
    const genero = [...document.querySelectorAll('input[name="genero_prof"]:checked')];
    if (genero.length === 0) fail('error-genero_prof');
    const cpf = document.getElementById('cpf_prof');
    if (!cpf.value.trim()) fail('error-cpf_prof', cpf);
    const matricula = document.getElementById('matricula_prof');
    if (!matricula.value.trim()) fail('error-matricula_prof', matricula);
    const campusChecked = [...document.querySelectorAll('input[name="campus_prof"]:checked')];
    if (campusChecked.length === 0) fail('error-campus_prof');
    else if (campusChecked[0].value === 'Outro') {
      const campusOutro = document.getElementById('campus_outro_text_prof');
      if (!campusOutro.value.trim()) fail('error-campus_outro_prof', campusOutro);
    }
    const materia = document.getElementById('materia_prof');
    if (!materia.value) fail('error-materia_prof', materia);
    else if (materia.value === 'Outro') {
      const materiaOutro = document.getElementById('materia_outro_prof');
      if (!materiaOutro.value.trim()) fail('error-materia_outro_prof', materiaOutro);
    }
    const email = document.getElementById('email_prof');
    if (!email.value.trim() || !email.checkValidity()) fail('error-email_prof', email);
    const senha = document.getElementById('senha_prof');
    if (!senha.value || senha.value.length < 6) fail('error-senha_prof', senha);
    const confirmarSenha = document.getElementById('confirmar_senha_prof');
    if (senha.value !== confirmarSenha.value) fail('error-confirmar_senha_prof', confirmarSenha);
    if (!valid) {
      event.preventDefault();
      const firstError = document.querySelector('.error-message[style*="block"]');
      if (firstError) {
        const offset = firstError.getBoundingClientRect().top + window.pageYOffset - 20;
        window.scrollTo({top: offset, behavior: 'smooth'});
      }
    }
  }
  document.getElementById('dadosFormAluno').addEventListener('submit', validateFormAluno);
  document.getElementById('dadosFormProfessor').addEventListener('submit', validateFormProfessor);

  // Autocomplete de professores
  const inputProfessor = document.getElementById('inputProfessor') || document.getElementById('inputProfessor');
  const autocompleteList = document.getElementById('autocompleteList');
  const listaProfessoresSelecionados = document.getElementById('listaProfessoresSelecionados');
  const btnAddProfessor = document.getElementById('btnAddProfessor');

  // Lista exemplo de professores
  const professores = ['Prof. João Silva', 'Profª. Maria Oliveira', 'Prof. Carlos Souza', 'Prof. Ana Lima', 'Prof. Roberto Nunes', 'Prof. Beatriz Fernandes'];

  function closeAutocomplete() {
    autocompleteList.innerHTML = '';
    autocompleteList.style.display = 'none';
  }

  function createAutocompleteItem(text) {
    const div = document.createElement('div');
    div.textContent = text;
    div.addEventListener('click', () => {
      inputProfessor.value = text;
      closeAutocomplete();
    });
    return div;
  }

  inputProfessor.addEventListener('input', () => {
    const val = inputProfessor.value.trim().toLowerCase();
    closeAutocomplete();
    if (!val) return;
    const matches = professores.filter(p => p.toLowerCase().includes(val));
    if (matches.length === 0) return;
    matches.forEach(m => {
      const item = createAutocompleteItem(m);
      autocompleteList.appendChild(item);
    });
    autocompleteList.style.display = 'block';
  });

  document.addEventListener('click', (evt) => {
    if (!evt.target.closest('#autocompleteList') && evt.target !== inputProfessor) {
      closeAutocomplete();
    }
  });

  btnAddProfessor.addEventListener('click', () => {
    const prof = inputProfessor.value.trim();
    if (!prof) return alert('Digite ou selecione um professor para adicionar.');
    // Apenas adiciona se for professor válido da lista
    if (!professores.includes(prof)) return alert('Professor não encontrado na lista.');
    // Evita duplicata
    const nomesAtuais = Array.from(listaProfessoresSelecionados.querySelectorAll('li span')).map(s => s.textContent);
    if (nomesAtuais.includes(prof)) return alert('Este professor já foi adicionado.');
    // Adiciona
    const li = document.createElement('li');
    const span = document.createElement('span');
    span.textContent = prof;
    li.appendChild(span);
    const btnRemove = document.createElement('button');
    btnRemove.type = 'button';
    btnRemove.className = 'remove-btn';
    btnRemove.textContent = 'x';
    btnRemove.title = 'Remover professor';
    btnRemove.addEventListener('click', () => li.remove());
    li.appendChild(btnRemove);
    listaProfessoresSelecionados.appendChild(li);
    inputProfessor.value = '';
  });
</script>
</body>
</html>
