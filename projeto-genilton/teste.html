<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Cadastro de Aluno ou Professor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eef1f5;
      display: flex;
      justify-content: center;
      padding: 40px 20px;
    }
    form {
      background: white;
      max-width: 550px;
      width: 100%;
      padding: 30px 35px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-radius: 8px;
      box-sizing: border-box;
    }
    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 25px;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: 600;
      color: #34495e;
    }
    input, select {
      margin-top: 6px;
      width: 100%;
      padding: 8px 10px;
      font-size: 1em;
      border-radius: 4px;
      border: 1px solid #bdc3c7;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus {
      border-color: #2980b9;
      outline: none;
      box-shadow: 0 0 6px rgba(41, 128, 185, 0.5);
    }
    .fields-group {
      margin-top: 20px;
      padding: 15px 20px;
      border: 1px solid #d1d8e0;
      border-radius: 6px;
      background-color: #f7f9fc;
    }
    button, .add-turma-btn, .remover {
      margin-top: 18px;
      background-color: #2980b9;
      border: none;
      color: white;
      font-size: 1em;
      font-weight: bold;
      padding: 8px 0;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s ease;
    }
    button:hover, .add-turma-btn:hover {
      background-color: #216994;
    }
    .hidden {
      display: none;
    }
    .turma-lista {
      margin-top: 10px;
      padding: 10px;
      background: #f7f9fc;
      border-radius: 5px;
    }
    .turma-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }
    .turma-item:last-child {
      border-bottom: none;
    }
    .remover {
      background: #e74c3c;
      color: #fff;
      border: none;
      padding: 2px 8px;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 10px;
      width: auto;
      font-size: 0.9em;
    }
    .message {
      margin-top: 18px;
      font-weight: 600;
      color: green;
      text-align: center;
    }
  </style>
</head>
<body>

<form id="formCadastro" autocomplete="off">
  <h2>Cadastro de Usuário</h2>

  <label for="perfil">Perfil</label>
  <select id="perfil" name="perfil" required>
    <option value="" disabled selected>Selecione o perfil</option>
    <option value="aluno">Aluno</option>
    <option value="professor">Professor</option>
  </select>

  <!-- Campos comuns -->
  <div class="fields-group">
    <label for="nome">Nome Completo</label>
    <input type="text" id="nome" name="nome" required />

    <label for="dataNascimento">Data de Nascimento</label>
    <input type="date" id="dataNascimento" name="dataNascimento" required />

    <label for="cpf">CPF</label>
    <input type="text" id="cpf" name="cpf" maxlength="14" placeholder="000.000.000-00" required />

    <label for="escola">Escola</label>
    <input type="text" id="escola" name="escola" required />

    <label for="matricula">Matrícula</label>
    <input type="text" id="matricula" name="matricula" required />

    <label for="telefone">Telefone e/ou Celular</label>
    <input type="tel" id="telefone" name="telefone" placeholder="(00) 00000-0000" />

    <label for="email">E-mail</label>
    <input type="email" id="email" name="email" required />

    <label for="senha">Senha</label>
    <input type="password" id="senha" name="senha" required />
  </div>

  <!-- Campos específicos para Professor -->
  <div class="fields-group hidden" id="camposProfessor">
    <label for="materia">Área de Atuação</label>
    <input type="text" id="materia" name="materia" />

    <label>Turmas da Escola</label>
    <div style="display:flex;gap:10px;align-items:center;">
      <input type="text" id="inputTurma" placeholder="Ex: 7° ano A" style="flex:2;">
      <button class="add-turma-btn" type="button" style="flex:1" onclick="adicionarTurma()">Adicionar Turma</button>
    </div>
    <div id="turmas" class="turma-lista"></div>
  </div>

  <!-- Campos específicos para Aluno -->
  <div class="fields-group hidden" id="camposAluno">
    <label for="serie">Série</label>
    <input type="text" id="serie" name="serie" />

    <label for="turno">Turno</label>
    <select id="turno" name="turno">
      <option value="" disabled selected>Selecione o turno</option>
      <option value="manha">Manhã</option>
      <option value="tarde">Tarde</option>
      <option value="noite">Noite</option>
    </select>

    <label>Endereço</label>
    <input type="text" id="rua" name="rua" placeholder="Rua" />
    <input type="text" id="numero" name="numero" placeholder="Número" style="margin-top:8px;" />
    <input type="text" id="complemento" name="complemento" placeholder="Complemento" style="margin-top:8px;" />
    <input type="text" id="bairro" name="bairro" placeholder="Bairro" style="margin-top:8px;" />
    <input type="text" id="cidade" name="cidade" placeholder="Cidade" style="margin-top:8px;" />
    <input type="text" id="estado" name="estado" placeholder="Estado" style="margin-top:8px;" />
    <input type="text" id="cep" name="cep" placeholder="CEP" style="margin-top:8px;" />

    <label for="professorResponsavel">Professor (nome ou ID)</label>
    <input type="text" id="professorResponsavel" name="professorResponsavel" />
  </div>

  <button type="submit">Cadastrar</button>
  <div class="message" id="msgSucesso"></div>
</form>

<script>
  // Mostra/esconde campos conforme perfil
  const perfilSelect = document.getElementById('perfil');
  const camposProfessor = document.getElementById('camposProfessor');
  const camposAluno = document.getElementById('camposAluno');
  const msgSucesso = document.getElementById('msgSucesso');
  const form = document.getElementById('formCadastro');

  perfilSelect.addEventListener('change', function() {
    if (this.value === 'professor') {
      camposProfessor.classList.remove('hidden');
      camposAluno.classList.add('hidden');
    } else if (this.value === 'aluno') {
      camposAluno.classList.remove('hidden');
      camposProfessor.classList.add('hidden');
    } else {
      camposAluno.classList.add('hidden');
      camposProfessor.classList.add('hidden');
    }
  });

  // Lógica para adicionar/remover turmas do professor
  let listaTurmas = [];
  const inputTurma = document.getElementById('inputTurma');
  const turmasDiv = document.getElementById('turmas');

  function adicionarTurma() {
    const turma = inputTurma.value.trim();
    if (turma && !listaTurmas.includes(turma)) {
      listaTurmas.push(turma);
      inputTurma.value = '';
      renderizarTurmas();
    }
  }

  function removerTurma(idx) {
    listaTurmas.splice(idx, 1);
    renderizarTurmas();
  }

  function renderizarTurmas() {
    turmasDiv.innerHTML = '';
    listaTurmas.forEach((turma, idx) => {
      const div = document.createElement('div');
      div.className = 'turma-item';
      div.innerHTML = `<span>${turma}</span>
        <button type="button" class="remover" onclick="removerTurma(${idx})">Remover</button>`;
      turmasDiv.appendChild(div);
    });
  }

  // Torna funções acessíveis no escopo global para os botões
  window.adicionarTurma = adicionarTurma;
  window.removerTurma = removerTurma;

  // Salva o cadastro (exibição no console)
  form.addEventListener('submit', function(e) {
    e.preventDefault();

    // Coletar dados comuns
    const dados = {
      perfil: perfilSelect.value,
      nome: form.nome.value.trim(),
      dataNascimento: form.dataNascimento.value,
      cpf: form.cpf.value.trim(),
      escola: form.escola.value.trim(),
      matricula: form.matricula.value.trim(),
      telefone: form.telefone.value.trim(),
      email: form.email.value.trim(),
      senha: form.senha.value
    };

    if (dados.perfil === 'professor') {
      dados.materia = form.materia.value.trim();
      dados.turmas = [...listaTurmas];
    } else if (dados.perfil === 'aluno') {
      dados.serie = form.serie.value.trim();
      dados.turno = form.turno.value;
      dados.endereco = {
        rua: form.rua.value.trim(),
        numero: form.numero.value.trim(),
        complemento: form.complemento.value.trim(),
        bairro: form.bairro.value.trim(),
        cidade: form.cidade.value.trim(),
        estado: form.estado.value.trim(),
        cep: form.cep.value.trim(),
      };
      dados.professorResponsavel = form.professorResponsavel.value.trim();
    }

    console.log('Dados cadastrados:', dados);

    msgSucesso.textContent = 'Cadastro realizado com sucesso!';
    form.reset();
    listaTurmas = [];
    renderizarTurmas();
    camposAluno.classList.add('hidden');
    camposProfessor.classList.add('hidden');
  });
</script>

</body>
</html>
